<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Defensivos</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- CSS do app -->
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/button.css">
    <link rel="stylesheet" href="/css/button2.css">
    <link rel="stylesheet" href="/css/busca.css">
    <link rel="stylesheet" href="/css/listarFerramentas.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
</head>

<body class="cards-page-body">
    <!-- Sidebar -->
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <!-- Conteúdo principal alinhado com a sidebar -->
    <main class="container py-4 with-sidebar">
        <!-- Título + subtítulo -->
        <header>
            <h1 class="page-title">Lista de Defensivos</h1>
            <p class="page-subtitle">Visualização em cards dos defensivos cadastrados no sistema.</p>
        </header>

        <!-- Toolbar: botão + busca -->
        <div class="row toolbar-row align-items-center g-3 mt-2">
            <!-- Botão Listar em Tabelas -->
            <div class="col-12 col-md-auto">
                <button class="toolbar-btn"
                        onclick="window.location.href='/defensivos'">
                    <span class="text">Listar em Tabelas</span>
                </button>
            </div>

            <!-- Busca -->
            <div class="col-12 col-md">
                <form action="/defensivos/buscar" method="get" class="w-100">
                    <!-- formato cards -->
                    <input type="hidden" name="formato" value="cards">

                    <div class="search-wrapper">
                        <div class="galaxy"></div>
                        <div id="search-container">
                            <div class="nebula"></div>
                            <div class="starfield"></div>
                            <div class="cosmic-dust"></div>
                            <div class="cosmic-dust"></div>
                            <div class="cosmic-dust"></div>
                            <div class="stardust"></div>
                            <div class="cosmic-ring"></div>

                            <div id="main" class="d-flex align-items-center">
                                <input class="input flex-grow-1"
                                       name="nome"
                                       type="text"
                                       placeholder="Buscar Defensivo" />
                                <div id="input-mask"></div>
                                <div id="cosmic-glow"></div>
                                <div class="wormhole-border"></div>

                                <div id="search-icon">
                                    <svg stroke-linejoin="round" stroke-linecap="round" stroke-width="2"
                                         stroke="url(#cosmic-search)" fill="none" height="24" width="24"
                                         viewBox="0 0 24 24">
                                        <circle r="8" cy="11" cx="11"></circle>
                                        <line y2="16.65" x2="16.65" y1="21" x1="21"></line>
                                        <defs>
                                            <linearGradient gradientTransform="rotate(45)" id="cosmic-search">
                                                <stop stop-color="#a9c7ff" offset="0%"></stop>
                                                <stop stop-color="#6e8cff" offset="100%"></stop>
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- botão invisível só pra submit -->
                    <button2 type="submit"></button2>
                </form>
            </div>
        </div>

        <hr class="mt-3">

        <!-- GRID DE CARDS -->
        <section class="mt-3">
            <div class="cards-container">
                <article class="tool-card" th:each="defensivo, iterStat : ${defensivos}">
                    <!-- Cabeçalho do card -->
                    <header class="tool-card-header">
                        <div class="tool-icon">
                            <i class="fa-solid fa-shield-virus"></i>
                        </div>
                        <h2 class="tool-title" th:text="${defensivo.nome}">Nome do defensivo</h2>
                    </header>

                    <!-- Corpo -->
                    <div class="tool-body">
                        <div class="tool-field">
                            <span class="tool-label">Categoria</span>
                            <span class="tool-value" th:text="${defensivo.categoria}"></span>
                        </div>

                        <div class="tool-field">
                            <span class="tool-label">Descrição</span>
                            <span class="tool-value" th:text="${defensivo.descricao}"></span>
                        </div>

                        <div class="tool-field">
                            <span class="tool-label">Quantidade</span>
                            <span class="tool-value quantity" th:text="${defensivo.quantidade}"></span>
                        </div>

                        <div class="tool-field">
                            <span class="tool-label">Fabricante</span>
                            <span class="tool-value" th:text="${defensivo.fabricante}"></span>
                        </div>

                        <div class="tool-field">
                            <span class="tool-label">Preço</span>
                            <span class="tool-value"
                                  th:text="${'R$ ' + defensivo.preco}"></span>
                        </div>
                    </div>

                    <!-- Rodapé / ações -->
                    <footer class="tool-footer d-flex justify-content-between gap-2">
                        <a th:href="@{/defensivos/editar/{id}(id=${defensivo.id})}"
                           class="btn btn-edit-premium"
                           onclick="return confirm('Tem certeza que deseja editar este Defensivo?');">
                            <i class="fas fa-edit"></i>
                            Editar
                        </a>

                        <a th:href="@{/defensivos/deletar/{id}(id=${defensivo.id})}"
                           class="btn btn-delete-premium"
                           onclick="return confirm('Tem certeza que deseja deletar este Defensivo?');">
                            <i class="fas fa-trash-alt"></i>
                            Deletar
                        </a>
                    </footer>
                </article>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>
