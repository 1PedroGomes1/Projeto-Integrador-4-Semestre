<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Materiais</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- CSS do app -->
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/button.css">
    <link rel="stylesheet" href="/css/button2.css">
    <link rel="stylesheet" href="/css/busca.css">
    <link rel="stylesheet" href="/css/listarFerramentas.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
</head>

<!-- Usa o tema claro de cards (mesmo das sementes) -->
<body class="cards-page-body">

    <!-- Sidebar -->
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <!-- Conteúdo alinhado com a sidebar -->
    <div class="container py-4 with-sidebar">

        <!-- Título / subtítulo -->
        <header class="mb-3">
            <h1 class="page-title">Lista de Materiais</h1>
            <p class="page-subtitle">
                Visualização em cards dos materiais cadastrados no sistema.
            </p>
        </header>

        <!-- Botão + busca -->
        <div class="row align-items-center toolbar-row g-3">

            <!-- Botão "Listar em Tabelas" -->
            <div class="col-12 col-md-auto">
                <button class="toolbar-btn" onclick="window.location.href='/materiais'">
                    <span class="text">Listar em Tabelas</span>
                </button>
            </div>

            <!-- Busca -->
            <div class="col-12 col-md">
                <form action="/materiais/buscar"
                      method="get"
                      class="d-flex justify-content-md-end">

                    <!-- Campo oculto para manter o formato em cards -->
                    <input type="hidden" name="formato" value="cards">

                    <!-- Wrapper para o search ocupar toda a largura disponível -->
                    <div class="w-100 d-flex justify-content-md-end">
                        <!-- mesma estrutura de busca com efeito "galaxy" -->
                        <div class="galaxy"></div>
                        <div id="search-container" class="w-100" style="max-width: 480px;">
                            <div class="nebula"></div>
                            <div class="starfield"></div>
                            <div class="cosmic-dust"></div>
                            <div class="cosmic-dust"></div>
                            <div class="cosmic-dust"></div>
                            <div class="stardust"></div>
                            <div class="cosmic-ring"></div>

                            <div id="main" class="d-flex align-items-center">
                                <input class="input flex-grow-1"
                                       name="nome"
                                       type="text"
                                       placeholder="Buscar Material" />
                                <div id="input-mask"></div>
                                <div id="cosmic-glow"></div>
                                <div class="wormhole-border"></div>
                                <div id="search-icon">
                                    <svg stroke-linejoin="round" stroke-linecap="round" stroke-width="2"
                                         stroke="url(#cosmic-search)" fill="none" height="24" width="24" viewBox="0 0 24 24">
                                        <circle r="8" cy="11" cx="11"></circle>
                                        <line y2="16.65" x2="16.65" y1="21" x1="21"></line>
                                        <defs>
                                            <linearGradient gradientTransform="rotate(45)" id="cosmic-search">
                                                <stop stop-color="#a9c7ff" offset="0%"></stop>
                                                <stop stop-color="#6e8cff" offset="100%"></stop>
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <button2 type="submit"></button2>
                    </div>
                </form>
            </div>
        </div>

        <hr class="mt-3">

        <!-- GRID DE CARDS -->
        <div class="cards-container mt-3">
            <!-- Card de material -->
            <div th:each="material : ${materiais}" class="tool-card col-12 col-md-6 col-lg-4 p-0">

                <!-- Cabeçalho do card -->
                <div class="tool-card-header">
                    <div class="tool-icon">
                        <i class="fa-solid fa-box-open"></i>
                    </div>
                    <h2 class="tool-title" th:text="${material.nome}">Nome do Material</h2>
                </div>

                <!-- Corpo -->
                <div class="tool-body">
                    <div class="tool-field">
                        <span class="tool-label">Categoria</span>
                        <span class="tool-value" th:text="${material.categoria}">Categoria X</span>
                    </div>

                    <div class="tool-field">
                        <span class="tool-label">Descrição</span>
                        <span class="tool-value" th:text="${material.descricao}">Descrição do material</span>
                    </div>

                    <div class="tool-field">
                        <span class="tool-label">Quantidade</span>
                        <span class="tool-value quantity" th:text="${material.quantidade}">0</span>
                    </div>
                </div>

                <!-- Rodapé / ações -->
                <div class="tool-footer d-flex justify-content-between gap-2">
                    <a th:href="@{/materiais/editar/{id}(id=${material.id})}"
                       class="btn btn-edit-premium"
                       onclick="return confirm('Tem certeza que deseja editar este material?');">
                        <i class="fas fa-edit"></i>
                        Editar
                    </a>

                    <a th:href="@{/materiais/deletar/{id}(id=${material.id})}"
                       class="btn btn-delete-premium"
                       onclick="return confirm('Tem certeza que deseja deletar este material?');">
                        <i class="fas fa-trash-alt"></i>
                        Deletar
                    </a>
                </div>
            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>
