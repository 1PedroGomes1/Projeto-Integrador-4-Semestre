<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lista de Ferramentas</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Estilos do app -->
  <link rel="stylesheet" href="/css/sidebar.css">
  <link rel="stylesheet" href="/css/button.css">
  <link rel="stylesheet" href="/css/button2.css">
  <link rel="stylesheet" href="/css/busca.css">
  <link rel="stylesheet" href="/css/listarFerramentas.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
</head>

<!-- SEM fundo escuro, o fundo vem do CSS -->
<body class="cards-page-body">

  <!-- Sidebar -->
  <div th:replace="~{fragments/sidebar :: sidebar}"></div>

  <!-- CONTEÚDO ACOMPANHANDO A SIDEBAR -->
  <main class="with-sidebar container py-3">
    <header class="mb-3">
      <h1 class="page-title mb-1">Lista de Ferramentas</h1>
      <p class="page-subtitle">Visualização em cards das ferramentas cadastradas</p>
    </header>

    <!-- Topo: botão + busca -->
    <div class="toolbar-row d-flex flex-column flex-lg-row align-items-center justify-content-between gap-3 mt-2">

      <!-- Botão voltar para tabelas -->
      <button class="toolbar-btn" onclick="window.location.href='/ferramentas'">
        <span>Listar em Tabelas</span>
      </button>

      <!-- Busca centralizada -->
      <div class="flex-grow-1 d-flex justify-content-center">
        <form action="/ferramentas/buscar" method="get"
              class="d-flex justify-content-center w-100" style="max-width: 520px;">
          <input type="hidden" name="formato" value="cards">

          <div class="galaxy"></div>
          <div id="search-container">
            <div class="nebula"></div>
            <div class="starfield"></div>
            <div class="stardust"></div>
            <div class="cosmic-ring"></div>

            <div id="main" class="d-flex align-items-center">
              <input class="input flex-grow-1" name="nome" type="text" placeholder="Buscar Ferramenta" />
              <div id="input-mask"></div>
              <div id="cosmic-glow"></div>
              <div class="wormhole-border"></div>

              <div id="search-icon">
                <svg stroke-linejoin="round" stroke-linecap="round" stroke-width="2"
                     stroke="url(#cosmic-search)" fill="none" height="24" width="24" viewBox="0 0 24 24">
                  <circle r="8" cy="11" cx="11"></circle>
                  <line y2="16.65" x2="16.65" y1="21" x1="21"></line>
                  <defs>
                    <linearGradient gradientTransform="rotate(45)" id="cosmic-search">
                      <stop stop-color="#3b82f6" offset="0%"></stop>
                      <stop stop-color="#6366f1" offset="100%"></stop>
                    </linearGradient>
                  </defs>
                </svg>
              </div>
            </div>
          </div>
          <button2 type="submit"></button2>
        </form>
      </div>
    </div>

    <hr class="mt-3 mb-3">

    <!-- GRID DE CARDS -->
    <section class="row cards-container">
      <div class="col-12 col-sm-6 col-lg-4 col-xl-3 mb-4"
           th:each="ferramenta, iterStat : ${ferramentas}">
        <article class="card tool-card shadow-sm">
          <!-- Cabeçalho colorido -->
          <div class="tool-card-header">
            <div class="tool-icon">
              <i class="fa-solid fa-screwdriver-wrench"></i>
            </div>
            <h5 class="tool-title" th:text="${ferramenta.nome}">Nome da Ferramenta</h5>
          </div>

          <!-- Corpo -->
          <div class="card-body tool-body">
            <p class="tool-field">
              <span class="tool-label">Descrição</span>
              <span class="tool-value" th:text="${ferramenta.descricao}">-</span>
            </p>
            <p class="tool-field">
              <span class="tool-label">Marca</span>
              <span class="tool-value" th:text="${ferramenta.marca}">-</span>
            </p>
            <p class="tool-field">
              <span class="tool-label">Quantidade</span>
              <span class="tool-value quantity" th:text="${ferramenta.quantidade}">0</span>
            </p>
          </div>

          <!-- Rodapé com ações -->
          <div class="card-footer tool-footer d-flex justify-content-between gap-2">
            <a th:href="@{/ferramentas/editar/{id}(id=${ferramenta.id})}"
               class="btn btn-edit-premium"
               onclick="return confirm('Tem certeza que deseja editar esta ferramenta?');">
              <i class="fas fa-pen"></i>
              <span>Editar</span>
            </a>

            <a th:href="@{/ferramentas/deletar/{id}(id=${ferramenta.id})}"
               class="btn btn-delete-premium"
               onclick="return confirm('Tem certeza que deseja deletar esta ferramenta?');">
              <i class="fas fa-trash-alt"></i>
              <span>Deletar</span>
            </a>
          </div>
        </article>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>
